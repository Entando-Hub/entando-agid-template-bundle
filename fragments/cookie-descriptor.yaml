code: cookie
guiCode: "<#assign c=JspTaglibs[\"http://java.sun.com/jsp/jstl/core\"]>\r\n<#assign wp=JspTaglibs[\"/aps-core\"]>\r\n\r\n<script nonce=\"<@wp.cspNonce />\" >\r\nwindow.onload = () => {\r\n\r\n    checkCookie();\r\n    document.getElementById(\"acceptBtn\").onclick = controlCookie;\r\n\r\n    function checkCookie() {\r\n        let consent = getCookie(\"CookiePresente\");\r\n        if (consent == null || consent == \"\" || consent == undefined) {\r\n            console.log(\"No Cookie !!!\"); \r\n           //show cookiebar\r\n            document.getElementById(\"cookie-container\").style.display = \"block\";\r\n        }\r\n    }\r\n\r\n    function setCookie(cname, cvalue, exdays) {\r\n        const d = new Date();\r\n        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n        let expires = \"expires=\" + d.toUTCString();\r\n        document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n    }\r\n\r\n    function getCookie(cname) {\r\n        let name = cname + \"=\";\r\n        let decodedCookie = decodeURIComponent(document.cookie);\r\n        let ca = decodedCookie.split(';');\r\n        for (let i = 0; i < ca.length; i++) {\r\n            let c = ca[i];\r\n            while (c.charAt(0) == ' ') {\r\n                c = c.substring(1);\r\n            }\r\n            if (c.indexOf(name) == 0) {\r\n                return c.substring(name.length, c.length);\r\n            }\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    function controlCookie() {\r\n\r\n        console.log(\"NO cookie quindi setto\");\r\n        document.getElementById(\"cookie-container\").style.display = \"none\";\r\n        setCookie(\"CookiePresente\", 1, 30);\r\n\r\n//Enable tracking & cookies of Matomo \r\n//        if (document.querySelector(\"#analyticsCookies\").checked) {\r\n//          let optionallyExpireConsentInHours = 720; //30 days\r\n//            window._paq.push(['rememberConsentGiven', optionallyExpireConsentInHours])\r\n//Enable tracking & cookies of Google Analytics\r\n//            window['ga-disable-' + 'UA-149283728-1'] = false;\r\n//            window.gtag('js', new Date());\r\n//            window.gtag('config', 'UA-149283728-1', {\r\n//                'anonymize_ip': true\r\n//            });\r\n//        } else {\r\n//Disable tracking & cookies of Matomo \r\n//          window._paq.push(['forgetConsentGiven']);\r\n//        }\r\n\r\n        if (document.querySelector(\"#thirdPartyCookies\").checked) {\r\n            setCookie(\"thirdPartyCookiesEnable\", 1, 30);\r\n        }\r\n\r\n    }\r\n};\r\n</script>\r\n\r\n<div id=\"cookie-container\" class=\"cookie-container-wrapper\" role=\"contentinfo\" style=\"display:none\" >\r\n    <div class=\"navbar-fixed-bottom navbar-cookies\">\r\n        <div class=\"inner-container\">\r\n            <div class=\"navbar-content-center\" id=\"accetta-cookie\">\r\n                <div class=\"cookie-container-setting\">\r\n                    <@wp.i18n key=\"PRIVACY_SETTINGS_BANNER\"/>                  \r\n                </div>\r\n                <div class=\"cookie-container-checkboxes\">\r\n                    <span>\r\n                        <@wp.i18n key=\"COOKIE_SETTINGS_LABEL\"/>\r\n                    </span>\r\n                    <div>\r\n                        <label class=\"switch\" for=\"technicalCookies\">\r\n                            <div class=\"cookie-label\" ><@wp.i18n key=\"COOKIE_TECH_LABEL\"/></div>\r\n                            <input type=\"checkbox\" id=\"technicalCookies\" checked disabled> \r\n                            <span class=\"slider round\" ></span>\r\n                        </label>\r\n                    </div>\r\n<#--\r\n                    <div>\r\n                        <label class=\"switch\" for=\"analyticsCookies\">\r\n                            <div class=\"cookie-label\" ><@wp.i18n key=\"COOKIE_ANALYTICS_LABEL\"/></div>\r\n                            <input type=\"checkbox\" id=\"analyticsCookies\" > \r\n                            <span class=\"slider round\" ></span>\r\n                        </label>\r\n                    </div>\r\n-->\r\n                    <div>\r\n                        <label class=\"switch\" for=\"thirdPartyCookies\">\r\n                            <div class=\"cookie-label\" >\r\n                                <@wp.i18n key=\"COOKIE_THIRD_PART_LABEL\"/>\r\n                            </div>\r\n                            <input type=\"checkbox\" id=\"thirdPartyCookies\" > \r\n                            <span class=\"slider round\" ></span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"save-preferences\">\r\n                    <a id=\"acceptBtn\" href=\"#\" class=\"btn-accept accept\">\r\n                        <@wp.i18n key=\"COOKIE_SAVE_LABEL\"/>\r\n                    </a>\r\n                    <a href=\"<@wp.url page=\"homepage\"/>\" class=\"btn-privacy\">\r\n                       <@wp.i18n key=\"PRIVACY_INFORMATIVA_LABEL\"/>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</div>"
